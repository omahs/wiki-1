"use strict";(self.webpackChunkdocs_website=self.webpackChunkdocs_website||[]).push([[761],{3905:(e,t,n)=>{n.d(t,{Zo:()=>d,kt:()=>m});var a=n(7294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var c=a.createContext({}),l=function(e){var t=a.useContext(c),n=t;return e&&(n="function"==typeof e?e(t):s(s({},t),e)),n},d=function(e){var t=l(e.components);return a.createElement(c.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},p=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,o=e.originalType,c=e.parentName,d=i(e,["components","mdxType","originalType","parentName"]),p=l(n),m=r,g=p["".concat(c,".").concat(m)]||p[m]||u[m]||o;return n?a.createElement(g,s(s({ref:t},d),{},{components:n})):a.createElement(g,s({ref:t},d))}));function m(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var o=n.length,s=new Array(o);s[0]=p;var i={};for(var c in t)hasOwnProperty.call(t,c)&&(i[c]=t[c]);i.originalType=e,i.mdxType="string"==typeof e?e:r,s[1]=i;for(var l=2;l<o;l++)s[l]=n[l];return a.createElement.apply(null,s)}return a.createElement.apply(null,n)}p.displayName="MDXCreateElement"},6850:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>c,contentTitle:()=>s,default:()=>u,frontMatter:()=>o,metadata:()=>i,toc:()=>l});var a=n(7462),r=(n(7294),n(3905));const o={sidebar_label:"Delayed Messages",sidebar_position:9},s="Delayed messages for smart contracts automation",i={unversionedId:"developing-contracts/delayed-messages",id:"developing-contracts/delayed-messages",title:"Delayed messages for smart contracts automation",description:"The usual way that smart contracts on other blockchains continue to function is by relying on external, centralized resources. This means that the code of these contracts will not run and make changes to the blockchain's state until it is triggered by an on-chain transaction.",source:"@site/docs/developing-contracts/delayed-messages.md",sourceDirName:"developing-contracts",slug:"/developing-contracts/delayed-messages",permalink:"/docs/developing-contracts/delayed-messages",draft:!1,editUrl:"https://github.com/gear-tech/wiki/edit/master/docs/developing-contracts/delayed-messages.md",tags:[],version:"current",sidebarPosition:9,frontMatter:{sidebar_label:"Delayed Messages",sidebar_position:9},sidebar:"tutorialSidebar",previous:{title:"Gas Reservation",permalink:"/docs/developing-contracts/gas-reservation"},next:{title:"Consistency and Reliability",permalink:"/docs/developing-contracts/distributed_transactions"}},c={},l=[],d={toc:l};function u(e){let{components:t,...n}=e;return(0,r.kt)("wrapper",(0,a.Z)({},d,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"delayed-messages-for-smart-contracts-automation"},"Delayed messages for smart contracts automation"),(0,r.kt)("p",null,"The usual way that smart contracts on other blockchains continue to function is by relying on external, centralized resources. This means that the code of these contracts will not run and make changes to the blockchain's state until it is triggered by an on-chain transaction."),(0,r.kt)("p",null,'The external transaction serves as a "poke" to activate the smart contract and initiate its logic. For instance, we can start an auction by sending a message to the auction contract. When the auction time has passed, the contract will need to process the result of the auction. However, this will not happen until someone sends the appropriate message to the contract to trigger this action.'),(0,r.kt)("p",null,"Gear Protocol solves this issue by introducing delayed messaging functionality. The smart contracts in Gear Networks are able to execute themselves an ",(0,r.kt)("strong",{parentName:"p"},"unlimited")," number of blocks, as long as enough gas for execution is kept available. The ",(0,r.kt)("a",{parentName:"p",href:"/docs/developing-contracts/gas-reservation"},"gas reservation")," option allows you to ensure this. As a result the need for including centralized components in dApps is eliminated, allowing them to function ",(0,r.kt)("strong",{parentName:"p"},"totally on-chain"),"."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-rust"},"msg::send_delayed(program, payload, value, delay)\nmsg::send_bytes_delayed(program, payload, value, delay)\n")),(0,r.kt)("p",null,"The delayed message will be executed after the specified ",(0,r.kt)("inlineCode",{parentName:"p"},"delay")," measured in blocks. For example, on a network with a block producing time of 2 seconds, a delay of 30 is equal to 1 minute."),(0,r.kt)("p",null,"Considering the example with auction, we can start the auction by sending a message to the auction contract. After completing all the necessary logic, the auction contract will send a delayed message to itself, which will settle the auction after the indicated time."))}u.isMDXComponent=!0}}]);