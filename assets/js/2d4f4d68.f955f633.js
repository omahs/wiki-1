"use strict";(self.webpackChunkdocs_website=self.webpackChunkdocs_website||[]).push([[7874],{3905:(e,t,n)=>{n.d(t,{Zo:()=>c,kt:()=>m});var r=n(7294);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var s=r.createContext({}),p=function(e){var t=r.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},c=function(e){var t=p(e.components);return r.createElement(s.Provider,{value:t},e.children)},d={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},u=r.forwardRef((function(e,t){var n=e.components,a=e.mdxType,o=e.originalType,s=e.parentName,c=l(e,["components","mdxType","originalType","parentName"]),u=p(n),m=a,h=u["".concat(s,".").concat(m)]||u[m]||d[m]||o;return n?r.createElement(h,i(i({ref:t},c),{},{components:n})):r.createElement(h,i({ref:t},c))}));function m(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var o=n.length,i=new Array(o);i[0]=u;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l.mdxType="string"==typeof e?e:a,i[1]=l;for(var p=2;p<o;p++)i[p]=n[p];return r.createElement.apply(null,i)}return r.createElement.apply(null,n)}u.displayName="MDXCreateElement"},4908:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>s,contentTitle:()=>i,default:()=>d,frontMatter:()=>o,metadata:()=>l,toc:()=>p});var r=n(7462),a=(n(7294),n(3905));const o={sidebar_label:"Troubleshooting",sidebar_position:8},i="Troubleshooting",l={unversionedId:"node/troubleshooting",id:"node/troubleshooting",title:"Troubleshooting",description:"Typical errors and solutions are described here.",source:"@site/docs/node/troubleshooting.md",sourceDirName:"node",slug:"/node/troubleshooting",permalink:"/docs/node/troubleshooting",draft:!1,editUrl:"https://github.com/gear-tech/wiki/edit/master/docs/node/troubleshooting.md",tags:[],version:"current",sidebarPosition:8,frontMatter:{sidebar_label:"Troubleshooting",sidebar_position:8},sidebar:"tutorialSidebar",previous:{title:"Node FAQ",permalink:"/docs/node/node-faq"},next:{title:"Executable Functions",permalink:"/docs/developing-contracts/executable-functions"}},s={},p=[{value:"Unavailable <code>LOCK</code> file",id:"unavailable-lock-file",level:2},{value:"Unexpected argument when starting the node service",id:"unexpected-argument-when-starting-the-node-service",level:2},{value:"Corrupted data base",id:"corrupted-data-base",level:2},{value:"Node executable file obsolescence",id:"node-executable-file-obsolescence",level:2},{value:"Masked service",id:"masked-service",level:2}],c={toc:p};function d(e){let{components:t,...n}=e;return(0,a.kt)("wrapper",(0,r.Z)({},c,n,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("h1",{id:"troubleshooting"},"Troubleshooting"),(0,a.kt)("p",null,"Typical errors and solutions are described here."),(0,a.kt)("h2",{id:"unavailable-lock-file"},"Unavailable ",(0,a.kt)("inlineCode",{parentName:"h2"},"LOCK")," file"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},(0,a.kt)("strong",{parentName:"p"},"Error:")," ",(0,a.kt)("inlineCode",{parentName:"p"},"IO error: While lock file /root/.local/share/gear/chains/gear_staging_testnet_v5/db/full/LOCK: Resource temporarily unavailable"))),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},(0,a.kt)("strong",{parentName:"p"},"Solution:")," You seem to be running several Gear node instances. Note that only one node instance is allowed to run. You likely have configured the node as a service and then ran the second instance from the command line. You should either stop the service or don't run the Gear node from the command line."),(0,a.kt)("p",{parentName:"li"},"  You can see the current node processes by running the command:"),(0,a.kt)("pre",{parentName:"li"},(0,a.kt)("code",{parentName:"pre",className:"language-shell"},"ps aux | grep gear\n")),(0,a.kt)("p",{parentName:"li"},"  If you want to break all node processes you may run:"),(0,a.kt)("pre",{parentName:"li"},(0,a.kt)("code",{parentName:"pre",className:"language-shell"},"pkill -sigint gear\n")),(0,a.kt)("p",{parentName:"li"},"  Note that the SystemD service can't be stopped by the command above. Run instead:"),(0,a.kt)("pre",{parentName:"li"},(0,a.kt)("code",{parentName:"pre",className:"language-shell"},"sudo systemctl stop gear-node\n")))),(0,a.kt)("h2",{id:"unexpected-argument-when-starting-the-node-service"},"Unexpected argument when starting the node service"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},(0,a.kt)("strong",{parentName:"p"},"Error:")," ",(0,a.kt)("inlineCode",{parentName:"p"},"Found argument '\\' which wasn't expected, or isn't valid in this context"))),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},(0,a.kt)("strong",{parentName:"p"},"Solution:")," The ",(0,a.kt)("inlineCode",{parentName:"p"},"gear-node.service")," configuration file seems to be misconfigured. Some versions of SystemD do not accept the backslash character (",(0,a.kt)("inlineCode",{parentName:"p"},"\\"),") as a line break. Therefore, it is better to write each of the config entry on one line."),(0,a.kt)("p",{parentName:"li"},"  Refer to ",(0,a.kt)("a",{parentName:"p",href:"https://wiki.gear-tech.io/node/node-as-service"},"https://wiki.gear-tech.io/node/node-as-service")," for properly configuring the node as a service."),(0,a.kt)("p",{parentName:"li"},"  Don't forget to restart the node after fixing the service configuration:"),(0,a.kt)("pre",{parentName:"li"},(0,a.kt)("code",{parentName:"pre",className:"language-shell"},"sudo systemctl daemon-reload\nsudo systemctl restart gear-node\n")))),(0,a.kt)("h2",{id:"corrupted-data-base"},"Corrupted data base"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},(0,a.kt)("strong",{parentName:"p"},"Error:")," ",(0,a.kt)("inlineCode",{parentName:"p"},"Database version cannot be read from existing db_version file"))),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},(0,a.kt)("strong",{parentName:"p"},"Alternative error:")," ",(0,a.kt)("inlineCode",{parentName:"p"},"Invalid argument: Column families not opened: ..., col2, col1, col0"))),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},(0,a.kt)("strong",{parentName:"p"},"Solution:")," The root of this problem is the lack of the disk free space. You may check the free space using the following command:"),(0,a.kt)("pre",{parentName:"li"},(0,a.kt)("code",{parentName:"pre",className:"language-shell"},"df -h\n")),(0,a.kt)("p",{parentName:"li"},"  Also, you may check how many space is used by the blockchain DB:"),(0,a.kt)("pre",{parentName:"li"},(0,a.kt)("code",{parentName:"pre",className:"language-shell"},"du -h $HOME/.local/share/gear/chains/gear_staging_testnet_v5/db/full\n")),(0,a.kt)("p",{parentName:"li"},"  Please refer to the ",(0,a.kt)("a",{parentName:"p",href:"/docs/node/setting-up#system-requirements"},"System Requirements")," to see the minimum disk space required."),(0,a.kt)("p",{parentName:"li"},"  You need to free more space then purge the chain:"),(0,a.kt)("pre",{parentName:"li"},(0,a.kt)("code",{parentName:"pre",className:"language-shell"},"sudo systemctl stop gear-node\n# Provide more free space on the disk\ngear purge-chain\nsudo systemctl start gear-node\n")))),(0,a.kt)("h2",{id:"node-executable-file-obsolescence"},"Node executable file obsolescence"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},(0,a.kt)("strong",{parentName:"p"},"Error:")," ",(0,a.kt)("inlineCode",{parentName:"p"},"Verification failed for block <block-id> received from peer <peer-id>"))),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},(0,a.kt)("strong",{parentName:"p"},"Alternative error:")," ",(0,a.kt)("inlineCode",{parentName:"p"},"runtime requires function imports which are not present on the host"))),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},(0,a.kt)("strong",{parentName:"p"},"Solution:")," ",(0,a.kt)("a",{parentName:"p",href:"/docs/node/node-as-service#update-the-node-with-the-new-version"},"Update")," the node binary to the latest version."))),(0,a.kt)("h2",{id:"masked-service"},"Masked service"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},(0,a.kt)("strong",{parentName:"p"},"Error:")," ",(0,a.kt)("inlineCode",{parentName:"p"},"Failed to start gear-node.service: Unit gear-node.service is masked."))),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},(0,a.kt)("strong",{parentName:"p"},"Solution:")," Please check: ",(0,a.kt)("a",{parentName:"p",href:"https://askubuntu.com/questions/1017311/what-is-a-masked-service"},"https://askubuntu.com/questions/1017311/what-is-a-masked-service")))))}d.isMDXComponent=!0}}]);