"use strict";(self.webpackChunkdocs_website=self.webpackChunkdocs_website||[]).push([[8760],{3905:(e,t,n)=>{n.d(t,{Zo:()=>p,kt:()=>m});var r=n(7294);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var s=r.createContext({}),c=function(e){var t=r.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},p=function(e){var t=c(e.components);return r.createElement(s.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},d=r.forwardRef((function(e,t){var n=e.components,a=e.mdxType,i=e.originalType,s=e.parentName,p=l(e,["components","mdxType","originalType","parentName"]),d=c(n),m=a,h=d["".concat(s,".").concat(m)]||d[m]||u[m]||i;return n?r.createElement(h,o(o({ref:t},p),{},{components:n})):r.createElement(h,o({ref:t},p))}));function m(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var i=n.length,o=new Array(i);o[0]=d;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l.mdxType="string"==typeof e?e:a,o[1]=l;for(var c=2;c<i;c++)o[c]=n[c];return r.createElement.apply(null,o)}return r.createElement.apply(null,n)}d.displayName="MDXCreateElement"},7878:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>s,contentTitle:()=>o,default:()=>u,frontMatter:()=>i,metadata:()=>l,toc:()=>c});var r=n(7462),a=(n(7294),n(3905));const i={sidebar_label:"Executable Functions",sidebar_position:1},o="Executable functions",l={unversionedId:"developing-contracts/executable-functions",id:"developing-contracts/executable-functions",title:"Executable functions",description:"The program is the main unit of the Gear Protocol. Each program in the Gear network is an immutable Wasm blob and has a fixed amount of memory which persists between message handling (so-called static area).",source:"@site/docs/developing-contracts/executable-functions.md",sourceDirName:"developing-contracts",slug:"/developing-contracts/executable-functions",permalink:"/docs/developing-contracts/executable-functions",draft:!1,editUrl:"https://github.com/gear-tech/wiki/edit/master/docs/developing-contracts/executable-functions.md",tags:[],version:"current",sidebarPosition:1,frontMatter:{sidebar_label:"Executable Functions",sidebar_position:1},sidebar:"tutorialSidebar",previous:{title:"Troubleshooting",permalink:"/docs/node/troubleshooting"},next:{title:"Gear Library",permalink:"/docs/developing-contracts/gstd"}},s={},c=[{value:"Basic structure",id:"basic-structure",level:2},{value:"init()",id:"init",level:3},{value:"handle()",id:"handle",level:3},{value:"handle_reply()",id:"handle_reply",level:3}],p={toc:c};function u(e){let{components:t,...n}=e;return(0,a.kt)("wrapper",(0,r.Z)({},p,n,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("h1",{id:"executable-functions"},"Executable functions"),(0,a.kt)("p",null,"The program is the main unit of the Gear Protocol. Each program in the Gear network is an immutable ",(0,a.kt)("a",{parentName:"p",href:"/docs/gear/technology/Wasm"},"Wasm")," blob and has a fixed amount of memory which persists between message handling (so-called static area)."),(0,a.kt)("h2",{id:"basic-structure"},"Basic structure"),(0,a.kt)("p",null,"Any program can contain up to 3 entry points that perform various functions in the program lifecycle: ",(0,a.kt)("inlineCode",{parentName:"p"},"init()"),", ",(0,a.kt)("inlineCode",{parentName:"p"},"handle()"),", ",(0,a.kt)("inlineCode",{parentName:"p"},"handle_reply()"),". All of them are optional, but any program required to have at least one fn: ",(0,a.kt)("inlineCode",{parentName:"p"},"init()")," or ",(0,a.kt)("inlineCode",{parentName:"p"},"handle()"),"."),(0,a.kt)("p",null,"Another special system entry point introduced by the Gear Protocol is ",(0,a.kt)("inlineCode",{parentName:"p"},"handle_signal()"),". It allows the system to communicate with programs if it is necessary to notify (signal) that some event related to the program's messages has happened. For more details and examples, check the article about ",(0,a.kt)("a",{parentName:"p",href:"/docs/developing-contracts/system-signals"},"System signals"),"."),(0,a.kt)("h3",{id:"init"},"init()"),(0,a.kt)("p",null,"Optional ",(0,a.kt)("inlineCode",{parentName:"p"},"init()")," function is called only once during program initialization and handles the incoming init payload if any."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-rust"},'\n#[no_mangle]\nextern "C" fn init() {\n    // execute this code during contract initialization\n}\n\n')),(0,a.kt)("h3",{id:"handle"},"handle()"),(0,a.kt)("p",null,"The ",(0,a.kt)("inlineCode",{parentName:"p"},"handle()")," function (also optional) will be called every time the program receives an incoming message. In this case, the payload will be processed."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-rust"},'\n#[no_mangle]\nextern "C" fn handle() {\n    // execute this code during explicitly incoming message\n}\n\n')),(0,a.kt)("h3",{id:"handle_reply"},"handle_reply()"),(0,a.kt)("p",null,"Processing the reply to the message in the Gear program is performed using the ",(0,a.kt)("inlineCode",{parentName:"p"},"handle_reply")," function."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-rust"},'\n#[no_mangle]\nextern "C" fn handle_reply() {\n    // execute this code during handling reply on the previously sent message\n}\n\n')))}u.isMDXComponent=!0}}]);